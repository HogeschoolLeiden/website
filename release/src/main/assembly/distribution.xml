<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>release</id>
	<formats>
		<format>tar.gz</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>
	<moduleSets>
		<moduleSet>
			<binaries>
				<unpack>false</unpack>
				<includeDependencies>false</includeDependencies>
				<outputDirectory>/webapps</outputDirectory>
				<outputFileNameMapping>site.war</outputFileNameMapping>
			</binaries>
			<includes>
				<include>nl.hsleiden:website-site:war:*</include>
			</includes>
			<useAllReactorProjects>true</useAllReactorProjects>
		</moduleSet>
		<moduleSet>
			<binaries>
				<unpack>false</unpack>
				<includeDependencies>false</includeDependencies>
				<outputDirectory>/webapps</outputDirectory>
				<outputFileNameMapping>cms.war</outputFileNameMapping>
			</binaries>
			<includes>
				<include>nl.hsleiden:website-cms:war:*</include>
			</includes>
			<useAllReactorProjects>true</useAllReactorProjects>
		</moduleSet>
	</moduleSets>
	
	<files>
		<file>
			<source>${project.basedir}/conf/log4j-prod.xml</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>log4j.xml</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/log4j.dtd</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>log4j.dtd</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/repository.xml</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>repository.xml</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/heapdump.sh</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>heapdump.sh</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/threaddump.sh</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>threaddump.sh</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/tomcat-restart-email.sh</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>tomcat-restart-email.sh</destName>
		</file>
		<file>
			<source>${project.basedir}/conf/tomcat-restart-email.txt</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>tomcat-restart-email.txt</destName>
		</file>
		<!--<file>
			<source>${project.basedir}/conf/context.xml</source>
			<outputDirectory>/conf</outputDirectory>
			<destName>context.xml</destName>
		</file> -->
	</files>
	<dependencySets>
		<dependencySet>
			<useProjectArtifact>false</useProjectArtifact>
			<outputDirectory>/common/lib</outputDirectory>
			<scope>provided</scope>
			<includes>
				<include>mysql:mysql-connector-java</include>
				<include>javax.jcr:jcr</include>
				<include>org.apache.geronimo.specs:geronimo-jta_1.1_spec</include>
				<include>javax.mail:mail</include>
			</includes>
		</dependencySet>
		<dependencySet>
			<useProjectArtifact>false</useProjectArtifact>
			<outputDirectory>/shared/lib</outputDirectory>
			<scope>provided</scope>
			<includes>
				<include>org.onehippo.cms7:hippo-cms7-commons</include>
				<include>org.onehippo.cms7:hippo-services</include>
				<include>org.onehippo.cms7:hippo-repository-api</include>
				<include>org.onehippo.cms7:hippo-repository-builtin</include>
				<include>org.slf4j:slf4j-api</include>
				<include>org.slf4j:jcl-over-slf4j</include>
				<include>org.slf4j:slf4j-log4j12</include>
				<include>log4j:log4j</include>
			</includes>
		</dependencySet>
	</dependencySets>
</assembly>
